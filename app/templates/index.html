{% extends "base.html" %}

{% block title %}家庭云存储{% endblock %}
{% block navbar %}
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="{{ url_for('main.index') }}">家庭云存储</a>
        </div>

        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav  navbar-right">
                <li><a href="{{ url_for('main.index') }}">主页</a></li>
                <li><a href="{{ url_for('main.uploadfile') }}">上传</a></li>
                <li><a href="{{ url_for('auth.logout') }}">退出</a></li>
            </ul>

            <form class="navbar-form navbar-right">
                <input type="text" class="form-control" placeholder="搜索...">
            </form>
        </div>
    </div>
</nav>
{% endblock %}
{% block content %}
<div class="container-fluid">
    {% block page_content %}
		<div class="row">
			<div class="col-sm-3 col-md-2 sidebar">
					<ul class="nav nav-sidebar">
							<li><a href="#">全部文件</a></li>
							<li><a href="#">图片</a></li>
							<li><a href="#">文档</a></li>
							<li><a href="#">视频</a></li>
							<li><a href="#">其他</a></li>
					</ul>

					<ul class="nav nav-sidebar">
							<li><a href="">重要备份</a></li>
					</ul>
			</div>

		<div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
			{% block core_content %}
			<h2 class="sub-header"> 全部文件 </h2>
			<form action="" method=post enctype=multipart/form-data>
				<p><input type=file name=file>
				<input type=submit value="上传">
			</form>
				<div class="table-responsive">
					<table class="table table-striped">
						<thead>
							<tr>
								<th>文件名</th>
								<th>大小</th>
								<th>修改日期</th>
								<th>下载</th>
								<th>删除</th>
							</tr>
						</thead>
						<tbody>
							{% for item in target_path %}
									<tr>
										<td>{% if item['directory'] %}
                      <a href="{{ url_for('main.disk_control', directory = item['name']) }}">{{ item['name'] }}</a>
                      {% else %}{{ item['name'] }}
                      {% endif %}
                    </td>
										<td>{{ item['Size'] }}</td>
										<td>{{ item['TimeModified'] }}</td>
										<td>{% if item['directory'] %}
                      文件夹
                      {% else %}
                      <a href="{{ url_for('main.downloadfile', filename = item['absaddr']) }}">下载</a>
                      {% endif %}
                    </td>

										<td><a href="{{ url_for('main.removefile', filename = item['absaddr']) }}">删除</a></td>
									</tr>
							{% endfor %}
						</tbody>
					</table>
				</div>
			{% endblock %}
		</div>
	</div>
		{% endblock %}
</div>
{% endblock %}
